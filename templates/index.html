<!DOCTYPE html>
<html lang="pl">
  <head>
    <meta charset="UTF-8" />
    <title>Produkty - CRUD z auth</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        padding: 40px;
        background: #f5f5f5;
      }
      h1 {
        text-align: center;
        margin-bottom: 30px;
      }
      form {
        margin-bottom: 20px;
      }
      table th,
      table td {
        text-align: center;
      }
      #logoutBtn {
        display: none;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Logowanie / Rejestracja</h1>
      <form id="authForm" class="row g-2 mb-4">
        <div class="col-md-4">
          <input
            type="text"
            id="login"
            class="form-control"
            placeholder="Login"
            required
          />
        </div>
        <div class="col-md-4">
          <input
            type="password"
            id="password"
            class="form-control"
            placeholder="Hasło"
            required
          />
        </div>
        <div class="col-md-4 d-flex">
          <button type="submit" id="loginBtn" class="btn btn-primary me-2">
            Zaloguj
          </button>
          <button type="button" id="registerBtn" class="btn btn-success me-2">
            Zarejestruj
          </button>
          <button type="button" id="logoutBtn" class="btn btn-danger">
            Wyloguj
          </button>
        </div>
      </form>

      <h1>Lista produktów</h1>
      <form id="productForm" class="row g-2 mb-3" novalidate>
        <input type="hidden" id="productId" />
        <div class="col-md-2">
          <input
            type="text"
            id="nazwa"
            class="form-control"
            placeholder="Nazwa"
            required
            minlength="3"
            maxlength="50"
          />
        </div>
        <div class="col-md-1">
          <input
            type="number"
            id="cena"
            class="form-control"
            placeholder="Cena"
            required
            step="0.01"
            min="0.01"
          />
        </div>
        <div class="col-md-2">
          <input
            type="text"
            id="kategoria"
            class="form-control"
            placeholder="Kategoria"
            required
          />
        </div>
        <div class="col-md-1">
          <input
            type="number"
            id="ilosc"
            class="form-control"
            placeholder="Ilość"
            required
            min="0"
            step="1"
          />
        </div>
        <div class="col-md-2">
          <input
            type="text"
            id="producent"
            class="form-control"
            placeholder="Producent"
            maxlength="100"
          />
        </div>
        <div class="col-md-2">
          <input type="date" id="data_dodania" class="form-control" max="" />
        </div>
        <div class="col-md-2">
          <button type="submit" class="btn btn-primary w-100">Zapisz</button>
        </div>
      </form>

      <table class="table table-striped table-bordered">
        <thead class="table-dark">
          <tr>
            <th>ID</th>
            <th>Nazwa</th>
            <th>Cena</th>
            <th>Kategoria</th>
            <th>Ilość</th>
            <th>Producent</th>
            <th>Data dodania</th>
            <th>Akcje</th>
          </tr>
        </thead>
        <tbody id="produktyList"></tbody>
      </table>
    </div>

    <script>
      document.getElementById("data_dodania").max = new Date()
        .toISOString()
        .split("T")[0];
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
  </body>
</html>
